{"version":3,"sources":["webpack:///./js/setting/index.js","webpack:///./js/api/moviesApi.js","webpack:///./js/utils/posterPath.js","webpack:///./js/utils/movieListsAdapter.js","webpack:///./js/utils/genreList.js","webpack:///./js/utils/genreConverter.js","webpack:///./index.js","webpack:///./templates/movieCard.hbs"],"names":["options","API_KEY","BASE_URL","IMG_URL","FilmotekaApiService","_params","this","searchQuery","page","totalPages","fetchResults","urlPopular","fetch","response","json","moviesLists","fetchSearch","urlSearch","fetchMovies","id","movieData","incrementPage","console","log","currentPage","decrementPage","resetPage","newQuery","movieAdapter","imageName","original_title","release_date","poster_path","vote_average","genre_ids","imgSrc","title","rating","releaseDate","genre","28","12","16","35","80","99","18","10751","14","36","27","10402","9648","10749","878","10770","53","10752","37","genresIdConverter","el","map","genreID","genreList","slice","join","filmotekaApiService","filmListRef","document","querySelector","PopularMovie","moviesList","results","renderMovieList","object","item","movieCardTmp","appendMovieListMarkup","event","clearMovieListContainer","query","target","value","alert","insertAdjacentHTML","innerHTML","addEventListener","debounce","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"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","file":"main.9bb06891294eabf8b7b7.js","sourcesContent":["const options = {\r\n    API_KEY: 'ed4770d472da6341d2e53ccb9e288320',\r\n    BASE_URL: 'https://api.themoviedb.org/3/',\r\n    IMG_URL: 'https://image.tmdb.org/t/p/w500/'\r\n}\r\nexport default options;","import options from '../setting';\r\nconst { API_KEY, BASE_URL } = options;\r\n\r\nexport default class FilmotekaApiService {\r\n  constructor(_params) {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n    this.totalPages = 500;\r\n  }\r\n  async fetchResults() {\r\n    const urlPopular = `${BASE_URL}trending/movie/day?api_key=${API_KEY}&page=${this.page}`;\r\n    const response = await fetch(urlPopular);\r\n    const moviesLists = await response.json();\r\n    return moviesLists;\r\n  }\r\n  async fetchSearch() {\r\n    const urlSearch = `${BASE_URL}search/movie/?api_key=${API_KEY}&page=${this.page}&query=${this.searchQuery}`;\r\n    const response = await fetch(urlSearch);\r\n    const moviesLists = await response.json();\r\n    return moviesLists;\r\n  }\r\n  async fetchMovies(id) {\r\n    const urlSearch = `${BASE_URL}movie/${id}?api_key=${API_KEY}`;\r\n    const response = await fetch(urlSearch);\r\n    const movieData = await response.json();\r\n    return movieData;\r\n  }\r\n\r\n  incrementPage() {\r\n    console.log(this.page);\r\n    if (this.currentPage === this.totalPages) {\r\n      return;\r\n    }\r\n    this.page += 1;\r\n  }\r\n  decrementPage() {\r\n    if (this.page === 1) {\r\n      return;\r\n    }\r\n    this.page -= 1;\r\n    \r\n  }\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","import options from '../setting';\r\nconst { IMG_URL } = options;\r\n\r\nexport const getPosterPath = imageName => `${IMG_URL}${imageName}`;\r\n","import { getPosterPath } from './posterPath';\r\n\r\n\r\nconst movieAdapter = ({\r\n  original_title,\r\n  release_date,\r\n  poster_path,\r\n  vote_average,\r\n  genre_ids,\r\n}) => ({\r\n  imgSrc: getPosterPath(poster_path),\r\n  title: original_title,\r\n  rating: vote_average,\r\n  releaseDate: release_date,\r\n  genre: genre_ids,\r\n  \r\n});\r\nexport default movieAdapter;\r\n","export default {\r\n    28: 'Action',\r\n    12: 'Adventure',\r\n    16: 'Animation',\r\n    35: 'Comedy',\r\n    80: 'Crime',\r\n    99: 'Documentary',\r\n    18: 'Drama',\r\n    10751: 'Family',\r\n    14: 'Fantasy',\r\n    36: 'History',\r\n    27: 'Horror',\r\n    10402: 'Music',\r\n    9648: 'Mystery',\r\n    10749: 'Romance',\r\n    878: 'Science Fiction',\r\n    10770: 'TV Movie',\r\n    53: 'Thriller',\r\n    10752: 'War',\r\n    37: 'Western',\r\n  };\r\n","import genreList from './genreList'\r\n\r\n\r\n export const genresIdConverter =(el) => {\r\n    el.genre_ids = el.genre_ids\r\n      .map(genreID => (genreID = genreList[genreID]))\r\n      .slice(0, 2)\r\n      .join(', ');\r\n    return el;\r\n  }\r\n","import './sass/main.scss';\r\nimport movieCardTmp from './templates/movieCard.hbs';\r\nimport FilmotekaApiService from './js/api/moviesApi';\r\nimport movieAdapter from './js/utils/movieListsAdapter';\r\nimport debounce from 'lodash.debounce';\r\n\r\nimport { genresIdConverter } from './js/utils/genreConverter';\r\n\r\nconst filmotekaApiService = new FilmotekaApiService();\r\nconst filmListRef = document.querySelector('.films-list');\r\n// const loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\r\n// const loadNextBtn = document.querySelector('[data-action=\"load-next\"]');\r\n// const loadPrevBtn = document.querySelector('[data-action=\"load-prev\"]');\r\nconst inputRefValue = document.querySelector('#js-input');\r\n\r\ninputRefValue.addEventListener('input', debounce(moviesSearch, 500));\r\n\r\n// loadMoreBtn.addEventListener('click', onLoadMore);\r\n// loadNextBtn.addEventListener('click', onLoadNext);\r\n// loadPrevBtn.addEventListener('click', onLoadPrev);\r\n\r\nasync function PopularMovie() {\r\n  try {\r\n    const moviesList = await filmotekaApiService.fetchResults();\r\n    const { results } = moviesList;\r\n    const changeGenre = results.map(el => genresIdConverter(el));\r\n    renderMovieList(moviesList);\r\n  } catch (error) {\r\n    console.log('Ошибка! (PopularMovie)');\r\n  }\r\n}\r\n\r\nasync function renderMovieList(object) {\r\n  try {\r\n    const { results } = object;\r\n\r\n    const movieList = await results.map(item =>\r\n      movieCardTmp(movieAdapter(item)),\r\n    );\r\n    appendMovieListMarkup(movieList);\r\n  } catch (error) {\r\n    console.log('Ошибка! (renderMovieList)');\r\n  }\r\n}\r\n\r\nPopularMovie();\r\n\r\nasync function moviesSearch(event) {\r\n  try {\r\n    clearMovieListContainer();\r\n\r\n    filmotekaApiService.query = event.target.value;\r\n\r\n    if (filmotekaApiService.query === '') {\r\n      PopularMovie();\r\n      return;\r\n    }\r\n    if (filmotekaApiService.query === ' ') {\r\n      return alert('Вы ничего не ввели');\r\n    }\r\n    \r\n    // filmotekaApiService.resetPage();\r\n    const moviesList = await filmotekaApiService.fetchSearch();\r\n    const { results } = moviesList;\r\n    const changeGenre = results.map(el => genresIdConverter(el));\r\n    return renderMovieList(moviesList);\r\n  } catch (error) {\r\n    console.log('Ошибка! (moviesSearch)');\r\n  }\r\n}\r\n\r\n// async function getMovie (event) {\r\n//   const movie = await filmotekaApiService.fetchMovies(791373);\r\n//   renderMovieData(object);\r\n// }\r\n// function renderMovieData (object){\r\n//   const movieDataInfo =  movieCardTmp(movieAdapter(object));\r\n// }\r\n// getMovie();\r\n\r\n// async function onLoadMore() {\r\n//   try {\r\n//     filmotekaApiService.incrementPage();\r\n//     if (!inputRefValue.value) {\r\n//       return PopularMovie();\r\n//     }\r\n//     const searchList = await filmotekaApiService.fetchSearch();\r\n//     return renderMovieList(searchList);\r\n//   } catch (error) {\r\n//     console.log('Ошибка! (onLoadMore)');\r\n//   }\r\n// }\r\n// function onLoadNext() {\r\n//   filmotekaApiService.incrementPage();\r\n//   clearMovieListContainer();\r\n//   PopularMovie();\r\n// }\r\n// async function onLoadPrev() {\r\n//   filmotekaApiService.decrementPage();\r\n//   clearMovieListContainer();\r\n//   PopularMovie();\r\n// }\r\n\r\nfunction appendMovieListMarkup(results) {\r\n  filmListRef.insertAdjacentHTML('beforeend', results.join(''));\r\n}\r\n\r\nfunction clearMovieListContainer() {\r\n  filmListRef.innerHTML = '';\r\n}\r\n\r\n// function genresMovieShort(element) {\r\n//   element.genre_ids = element.genre_ids.map(genreMovie => (genreMovie = genres[genreMovie]))\r\n//     .slice(0, 3)\r\n//     .join(', ');\r\n//   return element;\r\n// }\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"films-list__item\\\">\\r\\n    <a class=\\\"films-list__link link\\\" href=\\\"#\\\">\\r\\n        <div class=\\\"films-list__img-box\\\">\\r\\n            <img class=\\\"films-list__img\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"imgSrc\") || (depth0 != null ? lookupProperty(depth0,\"imgSrc\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"imgSrc\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":46},\"end\":{\"line\":4,\"column\":56}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":63},\"end\":{\"line\":4,\"column\":72}}}) : helper)))\n    + \" poster\\\" />\\r\\n        </div>\\r\\n        <div class=\\\"films-list__content\\\">\\r\\n            <h2 class=\\\"films-list__title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":42},\"end\":{\"line\":7,\"column\":51}}}) : helper)))\n    + \"</h2>\\r\\n            <p class=\\\"films-list__genre\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"genre\") || (depth0 != null ? lookupProperty(depth0,\"genre\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"genre\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":41},\"end\":{\"line\":8,\"column\":50}}}) : helper)))\n    + \"| \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"releaseDate\") || (depth0 != null ? lookupProperty(depth0,\"releaseDate\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"releaseDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":52},\"end\":{\"line\":8,\"column\":67}}}) : helper)))\n    + \" <span class=\\\"films-list__rating\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"rating\") || (depth0 != null ? lookupProperty(depth0,\"rating\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"rating\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":101},\"end\":{\"line\":8,\"column\":111}}}) : helper)))\n    + \"</span>\\r\\n            </p>\\r\\n        </div>\\r\\n    </a>\\r\\n</li>\";\n},\"useData\":true});"],"sourceRoot":""}